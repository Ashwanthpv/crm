<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}CRM{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body { padding: 1rem; font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
      .stats { display:flex; gap:12px; flex-wrap:wrap; margin-bottom:12px; }
      .stat-card { background:#fff; border:1px solid #eee; padding:12px; border-radius:8px; min-width:110px; text-align:center; box-shadow:0 1px 2px rgba(0,0,0,0.03); }
      .stat-value { font-size:1.4rem; font-weight:700; }
      .stat-label { font-size:.85rem; color:#6b7280; }
      .card { padding:12px; border-radius:8px; background:#fff; border:1px solid #eee; }
      .btn-primary { background:#0d6efd; border-color:#0d6efd; }
      @media (max-width:576px){ .stats{flex-direction:row; overflow:auto;} }
    </style>
  </head>
  <body>
    <div class="container">
      <nav class="mb-3 d-flex justify-content-between align-items-center">
        <div><a href="/" class="text-decoration-none"><strong>Navigator Assist</strong></a></div>
        <div class="d-flex gap-2 align-items-center">
          <a href="/clients/" class="btn btn-sm btn-outline-secondary">Clients</a>
          <a href="/tasks/" class="btn btn-sm btn-outline-secondary">Tasks</a>
          <a href="/deals/" class="btn btn-sm btn-outline-secondary">Deals</a>
          <a href="/products/" class="btn btn-sm btn-outline-secondary">Products</a>
          <a href="/reports/" class="btn btn-sm btn-outline-info">Reports</a>
          <a href="/download-data/" class="btn btn-sm btn-primary">Download Data</a>
          <span id="site-datetime" class="ms-3 text-muted small" aria-live="polite"></span>
        </div>
      </nav>
      </nav>

      {% block content %}{% endblock %}

      <footer class="mt-4 text-center text-muted small">&copy; {{ now|date:"Y" }} Navigator Assist</footer>
    </div>
    <!-- Bootstrap JS (bundle includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Live site datetime (local timezone) updated every second
      function updateSiteDatetime() {
        try {
          const el = document.getElementById('site-datetime');
          if (!el) return;
          const d = new Date();
          // Format: Weekday, YYYY-MM-DD HH:MM:SS
          const opts = { weekday: 'short' };
          const weekday = d.toLocaleDateString(undefined, opts);
          const date = d.toISOString().slice(0,10);
          const time = d.toLocaleTimeString();
          el.textContent = `${weekday} ${date} ${time}`;
        } catch (e) { /* ignore in older browsers */ }
      }
      // Start updater
      setInterval(updateSiteDatetime, 1000);
      // Run once immediately
      updateSiteDatetime();
    </script>
  </body>
</html>
